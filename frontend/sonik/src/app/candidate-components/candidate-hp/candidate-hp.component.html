<!--HEADER START-->
<mat-toolbar style="background-color: #17569b;">

  <span style="color:#fff">SONÄ°K</span>
  <span class="example-spacer"></span>
  <button mat-icon-button (click)="redirectProfile()">
    <mat-icon style="color:#fff;">account_circle</mat-icon>
  </button>
  <span class="spacer2"></span>
  <button mat-raised-button (click)="logout()">
    <mat-icon>logout</mat-icon>
    Logout
  </button>
</mat-toolbar>
<!--HEADER END-->




<body>
  <div class="container">
    <mat-card style="width: 75%;">
      <mat-toolbar class="tb">My Progress</mat-toolbar>
      <mat-divider></mat-divider>
      <mat-card-content>
        <div class="steps">
          <div class="progress-bar">
            <span class="indic" #progressBar></span>
          </div>

          <span class="circle" [class.active]="firstElementState === 'COMPLETED'"
            [class.failed]="firstElementState === 'FAILED'" [class.ongoing]="firstElementState === 'ONGOING'"
            [class.notStarted]="firstElementState === 'NOT_STARTED'" matTooltip="See stage information"
            (click)="openInfo(1)"><b>1</b></span>

          <span class="circle" [class.active]="secondElementState === 'COMPLETED'"
            [class.failed]="secondElementState === 'FAILED'" [class.ongoing]="secondElementState === 'ONGOING'"
            [class.notStarted]="secondElementState === 'NOT_STARTED'" matTooltip="See stage information"
            (click)="openInfo(2)"><b>2</b></span>

          <span class="circle" [class.active]="thirdElementState === 'COMPLETED'"
            [class.failed]="thirdElementState === 'FAILED'" [class.ongoing]="thirdElementState === 'ONGOING'"
            [class.notStarted]="thirdElementState === 'NOT_STARTED'" matTooltip="See stage information"
            (click)="openInfo(3)"><b>3</b></span>

          <span class="circle" [class.active]="fourthElementState === 'COMPLETED'"
            [class.failed]="fourthElementState === 'FAILED'" [class.ongoing]="fourthElementState === 'ONGOING'"
            [class.notStarted]="fourthElementState === 'NOT_STARTED'" matTooltip="See stage information"
            (click)="openInfo(4)"><b>4</b></span>

        </div>
        <div class="buttons">
          <button mat-button matTooltip="See stage information" (click)="openInfo(1)">TECHNICAL EVALUATION</button>
          <button mat-button matTooltip="See stage information" (click)="openInfo(2)">ENGLISH EVALUATION</button>
          <button mat-button matTooltip="See stage information" style="margin-left: 5%;"
            (click)="openInfo(3)">INTERVIEW MEETING</button>
          <button mat-button matTooltip="See stage information" style="margin-left: 6%;"
            (click)="openInfo(4)">FINAL STAGE</button>


        </div>
      </mat-card-content>
    </mat-card >
    <mat-card style="width: 75%; margin-top: 30px;">
      <mat-toolbar class="tb"> My Tests </mat-toolbar>
      <mat-divider></mat-divider>
      <mat-card-content>
        <table mat-table style="width: max-content;"  [dataSource]="(dataSource.filteredData.length>3)? dataSource.filteredData.slice(0,dataSource.filteredData.length-1) : dataSource.filteredData">
          <ng-container matColumnDef="testName">
            <th mat-header-cell *matHeaderCellDef> Test Name </th>
            <td mat-cell *matCellDef="let element"> {{element.test.testName}} </td>
          </ng-container>
          <ng-container matColumnDef="startDate">
            <th mat-header-cell *matHeaderCellDef> Start Date </th>
            <td mat-cell *matCellDef="let element"> {{element.startDate}} </td>
          </ng-container>
          <ng-container matColumnDef="endDate">
            <th mat-header-cell *matHeaderCellDef> End Date </th>
            <td mat-cell *matCellDef="let element"> {{element.endDate}} </td>
          </ng-container>
          <ng-container matColumnDef="duration">
            <th mat-header-cell *matHeaderCellDef> Duration </th>
            <td mat-cell *matCellDef="let element" > {{element.duration}} Min. </td>
            
          </ng-container>
          <ng-container matColumnDef="score">
            <th mat-header-cell *matHeaderCellDef> Score </th>
            <td mat-cell *matCellDef="let element"> {{element.score}} </td>
          </ng-container>
          <ng-container matColumnDef="action">
            <th mat-header-cell *matHeaderCellDef>Action</th>
            <td mat-cell *matCellDef="let element">
              <button mat-raised-button (click)="doAction()" [disabled]="element.score !== null || !isEndDatePassed(element)">
                <mat-icon>check_circle_outline</mat-icon>Proceed</button>
            </td>

          </ng-container>
 
          <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
          <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>

        </table>
      </mat-card-content>
    </mat-card>
  </div>

</body>